# Check out https://docs.codemagic.io/getting-started/building-an-ionic-app/ for more information
# Please review and update values in curly braces
# Remove or comment out the workflows you don't require

workflows:
    # Ionic Capacitor dev workflows
    ionic-capacitor-ios-app-dev:
        name: Ionic Capacitor iOS App Dev
        max_build_duration: 120
        instance_type: mac_mini
        environment:
            vars:
                XCODE_WORKSPACE: "ios/App/App.xcworkspace" # <- 'App' is the default workspace name for Capacitor projects
                XCODE_SCHEME: "App" # <- 'App' is the default Scheme name for Capacitor projects
                APP_STORE_CONNECT_ISSUER_ID: 0a86aa66-a24d-46fb-84cd-2d8e2dab75cf
                APP_STORE_CONNECT_KEY_IDENTIFIER: S5BTB687R3
                APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZySnJlZGlid0FqVlZXblpMZWNQUE9IdUtTV0FWN1ZzbmZkOHgxOFg1MWV1OXN0bmFHV2tOUGdwMlZtV3NPUWNzelVGSzNyVEJtYzM5eTI5eXJKeEt6VFBHeWF3R1NkanBlRGRrcXd1ejBkSmNIc0J5ajRXY2djalRtTkJWWWpZWG4zenFVcXFhS0N4UXEtUkhFb044SHFEOV9QOGpUdE5teFRmMTAzTUhDQ2RFX2xKU1lNYm9tWXFoeUZnZVBnVGdXelVYME9sRWJzSi1JQ2V6LWNqQ190Q3BTUnhpdWx0YWx4VmcxVXcwYzl3eUdvSzZjTFZESU9saEFKSUx6c21pV09ha2Ytb0UxdEhkZlhPRkkxZ1kwd2dhY0xNUkY1NkhjRjl4cldfcE82YUpEQ2g5SXA5eDNkb3QwSmtzMEQ5RkFwY0NNRHJ2WlhaNk9zMUU1c2VxQnBxb0szSVhlZjdMemYzWU9qS1A5a3lHWHRYWVhhQlduemlMd2dCeWdZVl91SGU5YlRjVWJ0WGRCMmVaSFBxUXdVd1RaRDdfT1RGMVBtbU9ONXdIcll6ZFc0UT0=)
                CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZyS0w2UTc4eWRFV1NHOG1IX1JiRW91RG42eFZzRFRaVkVIY1ZuZUdIaHkwcG91aFBXd1NJVVdjOFNOUzlmcnh4NVhXNUtjc2tIOENuSXFubDRrTWVESmhBZTA2YS1Za21vZllhajBzaHpPZ193QUtQQW1fQjJST2JyZDFTMlkyYWNVR1VHTkkxRTQzbzlMRjB6Nlg4ZHY1THh4X2JyakVpQnVzQ1lJTnRHM2ktbXFUdTRmTUZKTDlJbnFuR1JXYnlMbjhyRzdpMGx3RUhpRXh0aEFEU05jMHo3cklxLWVweS1PTUJvYjNiSjdER29Jdzd4d01qU0Y4N3lYZzd6dEFVV1k0c05wS2R3dllrVnlkZFk2d0Iwb1duS0kybjhrbmhuNG44SlQzdTluNFZGRjZ4UmpuOE5raUJfVzhSUXdDc1Bwa3EwUE1pYkUyeTBfWWNFRXFZMjkybXRlT2dET1VPbFktSjJlM2pycnhVZERpa283dEJVelk0b3JaNl9XSXFxRENlR3k0V1h4MHM0SllaekJjeTFiTHFIcVNQNEZBYXlyak5xVnBxR1Rham1nemZhX2FHX3JIZ01uUTc5cm5MZE1VcG91a0R2bjF5ckw1aWhCTk5sYVBJM2dhT01kOGUzZHNIX1hNRmZjZHNfbnFaYlRFOGFVTWtTZ1FyUzc4dGtpakJVMWhkUHlDSld3cVV6c0xYSXRzNkUwY2MwNkx3Sy1Qd2xjNnZqTW40UlB0VGZEUF9aVmkxaUdRZ1R0SXhyOV9nYjRINVdEMFZyclUwNkdFaHR6SGNhTDVEQzN0WFZFazNBemFTUXRYdGc1ZUgwOW1nU09Uek05SnJWbmYzejdqSEVoaUc1YlMyajFTUlpUUDBkY21xNElaS1hERUNpNENFNmVrUm5DQXdFaTNYZE56OFRGMnZxZTM5MU50T3FJVmcwdGZMbUFqR3B4OXVtVlJ6TFRZNFpobWxQZkhLVjdUaEg5blVWdXRKUkh2dktLdnBpcTRRbDJVcEx5NUJuek9FT3djUzdLZUdDRkhDb2t5ODhzM1RnbjNrV1NncnlUeDJGWmVSMTZoUTE1NXU2bnhIVDByd1VYTGVveHNiMXQ5dzlINUw3QWRRX2pLZzJ1cFN1cl93c0l3U2pjdmxVaGx1NkFZQnRLU3JDd2pnaVgtZlgyUjJlVTVjdG1jeGkxS2dRdlZUSVFpTnFmOFB0SXR2WVljekgycjNERU1WZTVIRk1mNmYxXzR3cFdHbVNBdWswRm9rY3JCMmgtVE8xb09hVk9YUnQ0bmk4Yld1bGl2d0Y0X2h5V1N3Q0tpdmZrRWZNeWRJY1BXb0x6RmZqWERGYlBRczhxZnhPNHRYZG5nVkk1MjRBZTBNbHN0aTlyRDNsOEVEUHRrNGYzbzljOENiSmxLSVplRTFKWnljRmVSZW5wbXRqb3FjYVI0cVAwRjRPUG90NzRudjRmUzdsNkVyWC1zbE1MRnRqVlZsZkRldGlqcXZNd0Z2WmNXQi1HT2FYS1RKZ0ItMV95eE0xaklYY3NfV21Bc2xST25DU3htd0hiQWkxdlo3TjlJWkh5WS1GZEVLQ05jUEo2LTUzMTByVlBXTHBjSVgwNVNnXzNVeTZmb0FlT0h5Y3dRUUdwbmN2ZHExQUx5TVBYYnp3bHZtc092cXZyR3JkSGtuam5GZGhPTTJRb25XT0Q4NkpCaDJ0RmlMNmtDeEdXY1ROclhrRkxmTDIzakVSNVZLU1UzUE5qU0lGSUNnbnhCa3lXLUYtTmFpbllWN081Y3NKNmlDUDhoTTg2NmVqWnZobDN2RHBQdzlIZnBaLVpqOE1Hb1B3VjJKajMwdzJScURaXzRGdHdyR2g1TXk5NktMZ29oRDlSbXdxakx0c0Y1RHdOaEtKRDJiRUlIU01JRGpMTXQtZTd4VVlZU2V2d09LOXFBY25KOWdsdnluRksyV0lsVmZlUW9SbDFRZG15ZzN6dUFIWFlOQU04NHR3SXFWLTlIRW11amFDdzFRaE0ySG5nTGdzZ01va2c4OEpKcjNkNUw0STlnbUZJN2pLWDFkbHlLdE5EV2FFRm9PUFZJX3NURHp0NDl4WkRsVFdlYWVWa2JoVXdDREUtUVJLOFB1NDZBNS1Xa0ZQQk1NMEhjcEdXVC1Gc3pkY1dfN0R3Q1VYNEdyUjZ6eDUydmdkeWlLUVlDaDFPV2JaOEJxRXd4UjNFMTZPOHhRYjJkaG50YVVhU2xWRHVPU0FhdktSa2diSjNwa2xfVGIySF9JdEpVTE41Z2R6TnY2XzgzNXVXUEdnNEhqNGR3S3dibXJYTFRMekJ5NVh3MERrc1drTWFDOWZVNEJrREpiY3IzWEVWRmFSR3hmaW9feDhnb1Q1SGJmc1VxWi1FUDlncHJGSDZ3VDhzYUVUYWhFSkNzZ2k5dEFoZU5ZMW45V3JvMHZ3S1JNNzBFOVlmbmxWQXktR0tpOFVXOFVId1owaVNPZ0ppVUp0QjVCLU9DdS1WYU5IWmMzenVYNEdLclFBbTlMN3F4eXNiMWRFY3JiR3hQTnp0QzdQUm4xQnN6T05HV29wemZzdG9EbXFKSTFsT0tRMTBBcmJzbEhQekNEbGxERG1XLTRUNGJkQWdRbkdZMEZhNmczbjAzdzIyUkdPdEU0TlJiTjZmRHoyd256ODE5bWlFN1A1am04TDlob2w5bU5obzFjV1Z4OUxNRGVEQ3hRRkdKcVdaRXBXd1M1bHZlajNGWnVWWEljOGhzYWx4SDIyWDRZOFNHMl9ORmNMSmxVT0lwV2RWOXdzS1JZVm9jd3pqWlVxUjN5U1dtRjFhbmtvb19ic1lvaUc1LVVsNUN0ZUExQVpMSjItSHdkV1FiVkU1R2xFcUdEcEx6MGVaVm5GRHNWNTB4RGZnYk9QbGZGZ2E5anhnTXhCdm50TVVGNTFhdEZUYkMxOTROdU5fcHh5SnVST2wtT0tsZ0xnTEVHZ1ZaRFZCeXpYRGxDWVcydExMREMteDlnVklYQk1SOUplQnBvQ2dtTWVrY3N1WlVFTzRUZGF3SkRPalpPVURheFlURlQ5dUlMbC1vaDZteGsyUXRqWGJLMXZFdXFqcHBxMHNQTWdkbkNyS3llWHJhQzRnWl9WSW8zTTROY2ctV2pBdklYSXlvZ3FaVWw4NWVWcjkxd0JWMHVBaGVvVlNiNWJtR182U3hHbzAzM0kxUlkydHNNMjQyZ1B0Y2lyX0Fhb19tZG1NQmtyLXdOMDdaWGRPYUxhZjFSOWttcFhpbUVPaHJnTXU4Q1QzSG1sZjczUUtGMEFYZlAtTmZ2czVqeXNtUmJmYTNOeXRsaUtockk0SDVTT3NFbHdvblQxS0U1UjloOC02LW9rbVpad2ZqVnhFRT0=)
                GOOGLE_SERVICE_INFO: Encrypted(Z0FBQUFBQmZyQVRvQzRkVGFJaEg1UjNtdWRISkxJQXRMUWxLZFByWFZSRnBHZ043c1JsSGhMZWg0Skl6UWNKWlIxLWVxVXpJaXR4MXFQaVgyVkhLXzg5WGJSZWFWY1ZTcnhUUEJEUEJWeFUyVHhFVDM4eXhha0NCbjdxTmFqMEdHdVBldzhURXRJV0pCZ0E3MzlsRGpIREFkTFRHYVN6U3BZZTR1MUZnaDlrY1BkanYtU3MyTUNKX2xIc0VoQ3BZUVdveDZ1Wlh3VmlFbDYtX3QyMlhMRGJ3UHRFTXVWQW56R3dNb0FZOVk2eTU1OENCZF9zQUp4eDc3OTd6WEpwSngyVFBCQ0RFbC1EcDlWdEVKazNFa1ZFRlN4Zk9lZ05PdGtLNW1PYkVJeG1IVHhzeTRWLUNfRkswM093ZWhIVnB5Yl9rNm1JU2hNVWRrX3JJZ1NmNFJqbkNJdEJGbENVNzhuR3ZJZjdNV0s0YnBLLXE3NWlTM1NSSTB3S0Z5NnlIbzFHQlFoYzMzRVlJM3pNdVl1am5aM0pjTWx2TEFFRVZNcDVrQ0tacFRvdWNmYk5QakdiVXBiUkt3Q25OaWhBM2dLVDcxa3BKbGh3VTJsanBsY0ZhTTNYZWRFak15bmlYLUFmb1RTdUtfbFNCWHVIb1BuNFQ3WUR0REVmZEpOYjZqazVoX0lDWFRQeENZQmRCVDVCZUhFNU55ckxUc1hXeXRyQ29DZ3NWV29OVmJoRU1DXzJDSjJNYWhNUXZ5NGh0NmpUSW9LTUlDZEJtNkFveHNNaFdaOVh1ZkRLbGRUa1JueXIteUo5STZrcGkyZHNReUhvb2xrVVJwWG1pTzZDZWc2MjFROTNEcU5LMEhYbHJJTUxKNHFSUDc0YjhIaGlQd24zekJxbXFPU2RiZU43WXhrb3JzdFRXcENheVRTVW5uTUVLaDI4aHViN19WbjRxTzBqWHZZMjRSZXpJbWxFMGc4RUNzbjkzZDZUZktGR0JweTVUQnVIVkZPYm94Y0lCc0xSNHM3VUo5VWNIcXlQbEtXNUpyRVN1bUcyV01CLUlFaE5Cb3hKT00wR0ZEaHROLWMtUnZfZnhJSTZhaGp4SnlCc1Rsb3dYeFhsT0lDMlBzMXI4dDVZb1dHMFk3eXh1MTItRDJEanhCdEpSVjFYd04wb09YRjZPcjUxX1FhQ0xaaGxYM3BGUl9NRE1aeUlRNHNpM0IxN3F5STZGUm9mVDV5YURmMjdISWZBRFlnOWx5ODM3MWxBYW9lbzAtMmRiR0N5VzctX3hjOEVrSFhtbExqMWtza20ybkpHaG5HaFcwV08zWFNzOWdaUTN0R19IamJjTVVrNTFxaTY3TElKZXNGV2txV0hiQm9RTW5IWVVYcDRxY2JhVlF0Yk51TWR5aWRYSmRBZ2NRMkV2QmFRcmwtSnBvS01FMEt5RjlCbU5qZEF3NmdXdmpzdTdUa3U3S1RBblBBSE5iMUdxX2d4NTM5VFItaHVVaExNWk1xTVBGd2QwelU2cXoyVFV1UGF3X0tOaTlwdGhzSjJ0UjBocGt5c2lnSzNadTZXZ0hNdVFXTWRmb2F6X285aHVKajFGZkpZX3dNOVdXLWlrRzdaZmtBRnRjeGFSdUZWNGxxNVdac3kxMWJtZlpuZmRmYi0wZXVZVFVRUUR0MDNELWJVa2xMdWRtOEQ0eTNxc19FenIxS1gtOHZ4SHFyd1BOUEduU1JvaXVKZklBUkFGb2FXdk9aNHhHTGlmLTAxNUNoQk5aSWRmUDRxckZ3X0QxM1hnYWhrcC1XYkZDM3B5WTJiUXE0VWxKZDBSZXVZUEw0bndYWmtfVDJEMGJ2ejVfcTZBZlpQSldicGlreWJHUGRYSi1SMGtGd3BhSWtTSFFUVVY0QUFCNnRQZUZJSE8yZF9zUFBPS0V1VkViQlNiQUlMVzEzOWhkQmQ0bmdFcjhSVXZIU2d0amxwQUZDdEZuX1dGak1ZZThpaWZ4Y2pWYWR4akFkWmdWVk1CdUxjbUxtWFhIdjFaS3JGeHhSdEVBaF9zakRIamtxODQ0THlNbmtSNkl0bVpoMU51ZGZGdmFYanljc09aVzhiSEtVMHNObUU4NFJnQ0JUb0FXbDkxU3hwR3ZWSjdHMk02ckhINzBseVU5OTB0c3VzZ195T0RMdlR2c0xnd2Z2dlNXeVlwdFVNbWFOSzdyUWd0WFpYZGJZOTRTUDhBbmtOU25KcXlWbkg3MW41X3dxdVdrV3FlLVRtcFF0RHdqUUU3SG54MFBzYjZiMGFYdGRSSmNFdnRsdUFwcTRKWFdiaXY1UE9jTUk3NG1rUDFNVXlPMUFac3FlcXpETmFTb2s4M3h5SGtsYVNfVDJhZXFiXzYtUEpWT0Z5WXpBVVRBelZYZmpUVnZENWg2X2tiLWNOaGNTMzlzTjB3QmZxUV9wblhzZFVIZTdSWHRlY21mV3NLNXBERURaaGdfY3BZXzFqbExjZ202U0pNZ0Q4cGZMZVlTaWJRX0RoTm9UamUtWGVUdWtpd3Q1NHhoZHRZR3ZadGFiTFp1MEJqbXFlR3hHdm01MzllR3NNU3ZHd3lnWElhYXBuMEY3eUFua0ZGd0tma2dXMldaWm1Xam50V1lqN1Z1bEt5U0tnTGdzLWM1bTF5elVWUVZrcWhhNGQ3ZWZZa29HUHpUeHoyU3hjaTA1dFpPdkVwcE5XQjVwZXE4TGpDZ3JWRkhHdnNLd3R0T3VqcGQ5S0hHSjNfMDB2M3RDdlNYTXkxNXVKdl96V2NpUFVnY19FY1h4cE1GRmdxY0RoOURBT1djUlhZRjJMUWNRZDZteXJoN1A4Nldyc2xROFloX1VBcVdPOGhvbjUxeXhIZXROcVV6Ylg0b0ttSzAxTHFoWGh0ZElkVjR1OGpscjdpSzlrY0NKMzhrd3V4c3hyVUw5WEtqWGM0ejhtTVRtaXl4UFQ4UDBOMkVub1ZvOUVqZ185ZnRVZGZFSm9Dbk1ZNVJPOU9xOUNZeVVSLWdia2cyeEUwcUxOY1BDc0lGMGxuUVhmUVFQMDBBcE9XT041a2JPTkdpY0hYel9rOVM5M0pNbzZOaXVJUTFoQ0t4TE9EZ0ROMWxoaFZtWXp1M0ZZLTBXeFgyZGdmdFpnSnVKY3F1ZVRQLUlySGh0WGhaUTA4M1RIa0MybTdWcjBPQzBfV3VjYVkydlY0bUNrTTkzdGYyMmpvcW5Mb2hfTmVlejg9)
                FIREBASE_API_KEY: Encrypted(Z0FBQUFBQmZyVXRQVlE2WmRiWVM4Y0l5TU5RQ0x3emR3TDQ0ZWdJclRlNkItS1MyYS1ENm53VzdmQmNITVRXTThSLTJVXzhCQ1RYb2FSTDR6U2oxQ0R0Mmd3SFdOS2FaZjhLUG5HUkV5UDZKMEFoMGdVQzh1bjZXT0FJMmRtbnJEazZXY204ejNhN24=)
                FIREBASE_AUTH_DOMAIN: Encrypted(Z0FBQUFBQmZyVXg5ZGt1d21vUnJBSnB4cVRDNHpwN0NhOWpkZi15SzQtSF81bGVncWxFOFNCM040Q0VIeDhYaE5XQ0hjVlBnQlF5UDE3dWhJVThJMDNCUHg1WjdkXzc4MGV3OWgwZllMdFZlVGxncjlNSnZOOFJxN0kyNk9UMXA4Zl93RzRxV3NTbWM=)
                FIREBASE_DATABASE_URL: Encrypted(Z0FBQUFBQmZyVXpXTWUzYXpTMklRRGp3X3VvMFdsUVlldDRjdkh0NjNPQmFGMGJyZXFwYUM2amdLNnFqN2ZhcmZwVXdpcnFVTTFqcmR3by1TS0RDVE1qdDJQQkVWZ2JxX2xXUFVYZUhXVGZ4RThIYkJxN1I3UDNIMElLN09ocW9FZzRfakhJZUhJYXk=)
                FIREBASE_PROJECT_ID: Encrypted(Z0FBQUFBQmZyVXo2SFRVWFdJc3pfUkhHc2tVMTh0MW1QQWk3TklDNEllXzZxc3d0dXJxNVVTOWN1ZWEwOElEV3VNN3hzRXQyTUUtWDdFaUkwcGxOV2M5ZHRjS2xkUGJ4dDdFV1Z2dzlWZ2s3cGpXNmYyLTZhczQ9)
                FIREBASE_STORAGE_BUCKET: Encrypted(Z0FBQUFBQmZyVTBnUHY2b0pkQTRPa2pVbk8zbVE3cmZBbjJvX3JTbFJoa0NadkNDeHh3bEZnVDJHbWtGS3BXUEppOENFQ0swXzI0bmkxWldHNXdZTFBzbjAzSDZLNHdQbzJZcWlmWXpTOXo5amhhV2JQOFBHelU9)
                FIREBASE_MESSAGING_SENDER_ID: Encrypted(Z0FBQUFBQmZyVTFPNlpuSl85MkstT1B4cVZkbjFReXN2ZFNlWi1BV0UtQ0VGcGtsem84QnNBTnlQNnV1aWxkS2lSc3ZpMTc0LW55Rm4wVTREWThyNFQyS0lmbHZOUTFxeTgtTnV3NDd2Y2p2SnpPYVJZZmZCUWNpLWhvdUdvT0lSMU05SXFXVUlyNGc=)
                FIREBASE_APP_ID: Encrypted(Z0FBQUFBQmZyVTJLYlRJSnljVGtXVnZsN2FYX1FMejU0SldvOXRMVXlYSFphcUxhcTNIM01SVTJXdmd6d1RPMlZ3YWV3enlua2J2ZEUwQ09rOG95UTlEMHBtMHpKYVJja09WSlRld3ZOQWpORF9MelJwelVDZlhqbnFYYmlpLV9YZ2JMSW1jVk5UTUc=)
                FIREBASE_VAPID_KEY: Encrypted(Z0FBQUFBQmZyVTRyRUZSMjNhTmtFTlJzd2xoTkZ5N0VpeGR2Tlc4dW54TzlDblAxaHdsWkJBcWRkeWNLNy1qRGVKcjRrUFVwNi1CNVQyM1JyNnNrSy1lcG02Q29ITEpOSUktV3hYMWNJbjk2R0dpd1hWNkdiTVNabG9neFhFWHloanBBeHdRcXhBdmFWWFRiQjYxOW5tdnVKOFdBNF85S19JNkpETHNxLVlmUzZwekM4Q0xmeWpOSVhseUdmb0FqbGZsbFFEYmdFVHFD)
                FIREBASE_HOSTING_URL: https://ottertherapiesdev.web.app
            node: 12.19.0
            xcode: latest
            cocoapods: default
        triggering:
            events:
                - push
            branch_patterns:
                - pattern: dev
                  include: true
                  source: true
        scripts:
        - | 
            npm install
            npm run build
        - |
            npx cap sync
            echo ${GOOGLE_SERVICE_INFO} | base64 --decode > $FCI_BUILD_DIR/ios/App/App/GoogleService-Info.plist
        - |
            cd $FCI_BUILD_DIR/ios/App
            pod install
        - |
            keychain initialize
        - |
            app-store-connect fetch-signing-files "com.ottertherapies.app" --type IOS_APP_STORE --create
        - |
            keychain add-certificates
        - |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR/ios/App
            agvtool new-version -all $(($BUILD_NUMBER +1))  
        - |
            xcode-project use-profiles
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
        artifacts:
            - build/ios/ipa/*.ipa
            - /tmp/xcodebuild_logs/*.log
            - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.app
            - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
        publishing:
            app_store_connect:
                apple_id: shane.earley10@gmail.com # <- put your Apple Id here
                password: Encrypted(Z0FBQUFBQmZyQjlpcnpnSFd5cjA5ZkIwSkNTN2ZCNXRXcnowOUJPc05kajBabUF0aU1BLUVMbE1tSjlhclhpcU9QVUlSaXdOZjg0Y2dlMTNaUHFuOGZfWVA3Q1dITzNsaXhxa2NtVDBVZG02ZGtYWHN2MzFNUkU9)
            email:
                recipients:
                    - shane.earley10@gmail.com
                notify:
                    success: true     # To not receive a notification when a build succeeds
                    failure: true     # To not receive a notification when a build fails  
    ionic-capacitor-android-app-dev:
        name: Ionic Capacitor Android App Dev
        environment:
            vars:
                GOOGLE_SERVICES: Encrypted(Z0FBQUFBQmZyQUpRRUpKYVItNHFwandJaVVydkJvZ2E1anpqRWVHWnNCODlLNzE4bkRndENXTl9YWWNPVThMazlSTEQ0ZDBUYkNGbGhvbnYxVzZQa3ZkWndCTzhDdUZJem1vbDBHc21KdDYzMXgwRW9vVkt5Y3RqU3R4bm8wMUpQVEFMaGp0N3I4UnVLbGZDeUMxUVJ5bURsS011a2pNS3pMakktbk02bGxBY096U2JLSHAzV2VpYndLTFFRZk9MMGZiWlFBalhSX1B3bE5HQkdJTkdwZGpsek9ZQXdxaVdjSXdGXzVsQjFpM0Q4Y3NtN0ZvR0RFTUFqcGhjN2NnSVBNVVcyN1JtVVZkN2FIZVdxZHpvLTQxdmZRZkVBeEVFQjY5WnNFSEYwTTJ1OEkya3o1WEpqLXdEa0F1Ti1YZ0hkaUY1cmpGQTlOZFR2RUdORHZ5aHROaVBtMk91ckR1QnFPQ0twYThBTHJiMHBFZFZ2WVR0WEVsa09Mc0czQmFacUV6aEktaVdJX1l4ZUtRNklCS0lER3d4RXhjdTdPZVdkT1BpTXgwLUhzeDIyQkFmRWtqdzF2cWpVMENvSUFiNmtmZEhScHpRMnNGZUZxbFBoS1c1RFJYN0NvdkVwelIycHoyX0puSnFQeEJBTUN3STdmU0NOSEdtSDFWV3o4NUhKb19aSlJtV0ZmeFZNZWlsYmJPQXlBWWhRVTctaHJ4M196c3I3MmFCeXMxYzI4ZDJqNDJfYVRLR0FhQW5KTDNQZm1CRzRvY0tnU0RIdEFQLVhabGExRDdiVGRPQmhpOFdSaXJkTDZjN0ZqWHFIV3o0eXJ6M3gzUExadnhuWGg0T2JZWDJTc09jeEViZm12TGdtOW5IRXVBbFpCa3dNX3l1MHduRzJoYnNoRmVVd0NjTXdMNU81dklZajV1cjQyM3oyZzJxbF9keFp3VnVHVjJ2YllKalo1djdGSFkybFB0Qm9TQ2N6d2ZwSmc1ZjNaeGhXYW5KYlE3VGlfRTBUNzBNVTVMWUZUYWZLUFlXaXdyVmx1UzZKVDNycXBwLTltV2xIOFZqcjJqZVA0ZVlXd1AyRnVyLWpTVjZQaTgyeGk5aVkyOXhtZnpWUkx1VlJqVTctUHRnb29vQVQ5anhGcnBGaUFXWmdFTENvaVRKb1JQNTdxdHFhN2JIY2U1aUhzeXAtc3o2NWFZd0tabUI1SUl1T0xhZnVYNFdNcWdIT2dscC1ud3VhNk5nWTV2bjU2OXZJR1ltTzZWZWVaUXJnV3Z4cG5zSTZ1X0s2UzFXS0VpTmRxLTlkV0l2Qkd0d0FkWHdSdVdJbFFGbzFPVUl1OG5SWmtSQlFJelB6OXNuS0NKbHN2Sl81V1Z4YlVyVjNYRVR2VDJpVlNUVlU0ZVlKZ0dmcTBVRlZyeGRhMHBjak9Oc05ETGVFYUJkYmt6QjVhV2M2bjhzd2k2V2MyTkFOWUlwb29jQVFpVmJTa05lenBhTWo3ZnpjZkY3WDdLbksyOGFyWW1IQV82QzlhaENSS1VSZjk3SVBocElUYzRranBLekZFWHFuZXZyekZ5eW1saEQ4OWpKc2NkeUtaMnpUY1VmZW1Ra29TT18wWmFKQVdvVXFTZVlld1BGUzMwUzUyZkowdGZJQWV0aS1qT3NOS3FZc1FYb1dMZW5CMjB3QkYzT29kbkZDUV9OWEdVRDR5U3dPV2hReHpnaWtHMC15TzdjdVlkRjRETVhFSWVPMUhReVotQXQ4OWlNbk0yb2ZuQTQ5a3F6ZFNiSnNjSnp5Mzd3MDc1anRfRDNOR3pBNEp4Z0FmMGM3TzI2RFJpR0FfQnRzRGpIYThtSW9iYlZudE9rQkNzU0RSd2JqWnU2aHRNOXpvOF9oMVUzMzNyYXJHWnhfc0lQZlY0WEpJc1o5blU0Q2owZTNiVWJ0VFlrY1FWWGNvR0RzNjlWRnFQbUtuYVRrWTlwSmV1Qzg5UUNWQXZ2OFBiNi1zT2lwSS0yQ1VfUlVkSDg4UnlNS2hiTmVvS2tyT2VqX1NhdG5uLVhLV05wUUwxeUU2NWtGS3FxRVY1XzY3aENEOGVIdGZ4YXVybWppNnNLVUxuR3piMjJwMGx4bnpONG5nRlpsY3dJUmloTEJyY0hoaXIxNFBGYnZockk5Y01QdHJmM2thTkJVM0ZFQzBQQUUxRmhFQ0MtUDlzZ0IycXpJdV9DcFhHd0FGUEZ3aFQxdnY0QVdvdXFndHhqVDAyYmJqbUFudEFYT0ppb0NReHpKNmMwU1djbm5meW8tM2JES1lFd1hYSHQ2QmpXZkE5ZW8wMURkcGc0cEtSNGZmaFJ3dzZVYnZWXzhHZjJFS2dIbHVneHJjOVJ4NHpZRmw1T2xMWDlhS09RdENGcndQTUxOd0pNV2dTaFlLZmR0T09rajhFQi1fMFBiQUVhQ1lyNW94NHlwcGpEZHh3Z1ljQUdnZzNlci16SjFSc2lsS0lGU1drRWZLUXA4cW9RWk5HS09nVkNUMk81bnJ1VEgzVEk2VGxBVWtKa1NCTVhoMVNxakR0a1ZoUlpReS10R1JLWFFzenctZVJkRlQ4cDE3dTJTc0pCN0VqUzNRMk1jT19UZGtlLXJjaDhCTEhxNnpwRUtjdWZxSDRveHl3R1lvNFo5VEczcGRGbFdDR3RpUk90YTJZTVctRTdqdE9Ob0taOW9Kem1MTkJUQm85SUlLRHYxMHh5VzlCMEt5dlFOb3hIaGVEXzRGUXJfOUd0Q3UyUXJfdGdQcnNwU2Y1d1d2QW9KdjRoamZ6VTROM2RMal8waHJRRE5QMUxKSXZydGNDVVg3Q1JYSTRLLXJseXEycDJhYXJSMDU1UnYtTkZXN0V4R3I1ZU9MRjBhZEdiWmNvRmEwV2xUNEdoQzNZeFdQbnFyNm56bnUyZnFrSWkzeHdsM0JkVC1obHpSYzFEVllfQXhqZFJlVnFfa1pXT1dFZmVaQWJwUk40SnpMTWNfRTBlY3MzemRlS0ZDSWpkY3lmc0JDb1FPR2ZwdUJQWlpxVXRyZkZxQWZGNFM1bDZfT0ZycnhrMWlvTFc2MndmY2I4emhZSWhxUnNJaVNDbVJ6TDZzZHBRXzNwNlJIWmJLbTZUSjdiUnU3dHFjbUZvRjE5WFFLWEJJeVYtTkN5eUE5aFF4VzBaUmlIdGJobWFwTXBXZGt2dTZjTTZRNk92T3RuUXZZX0hjdzBnQ01PQ00teUF5a3VqTldCa1RBRjFSeFJHLUdyNmFYVTJkZU1LczJnWmlldTJGWnRrSGoyRFF3PT0=)
                FIREBASE_API_KEY: Encrypted(Z0FBQUFBQmZyVXRQVlE2WmRiWVM4Y0l5TU5RQ0x3emR3TDQ0ZWdJclRlNkItS1MyYS1ENm53VzdmQmNITVRXTThSLTJVXzhCQ1RYb2FSTDR6U2oxQ0R0Mmd3SFdOS2FaZjhLUG5HUkV5UDZKMEFoMGdVQzh1bjZXT0FJMmRtbnJEazZXY204ejNhN24=)
                FIREBASE_AUTH_DOMAIN: Encrypted(Z0FBQUFBQmZyVXg5ZGt1d21vUnJBSnB4cVRDNHpwN0NhOWpkZi15SzQtSF81bGVncWxFOFNCM040Q0VIeDhYaE5XQ0hjVlBnQlF5UDE3dWhJVThJMDNCUHg1WjdkXzc4MGV3OWgwZllMdFZlVGxncjlNSnZOOFJxN0kyNk9UMXA4Zl93RzRxV3NTbWM=)
                FIREBASE_DATABASE_URL: Encrypted(Z0FBQUFBQmZyVXpXTWUzYXpTMklRRGp3X3VvMFdsUVlldDRjdkh0NjNPQmFGMGJyZXFwYUM2amdLNnFqN2ZhcmZwVXdpcnFVTTFqcmR3by1TS0RDVE1qdDJQQkVWZ2JxX2xXUFVYZUhXVGZ4RThIYkJxN1I3UDNIMElLN09ocW9FZzRfakhJZUhJYXk=)
                FIREBASE_PROJECT_ID: Encrypted(Z0FBQUFBQmZyVXo2SFRVWFdJc3pfUkhHc2tVMTh0MW1QQWk3TklDNEllXzZxc3d0dXJxNVVTOWN1ZWEwOElEV3VNN3hzRXQyTUUtWDdFaUkwcGxOV2M5ZHRjS2xkUGJ4dDdFV1Z2dzlWZ2s3cGpXNmYyLTZhczQ9)
                FIREBASE_STORAGE_BUCKET: Encrypted(Z0FBQUFBQmZyVTBnUHY2b0pkQTRPa2pVbk8zbVE3cmZBbjJvX3JTbFJoa0NadkNDeHh3bEZnVDJHbWtGS3BXUEppOENFQ0swXzI0bmkxWldHNXdZTFBzbjAzSDZLNHdQbzJZcWlmWXpTOXo5amhhV2JQOFBHelU9)
                FIREBASE_MESSAGING_SENDER_ID: Encrypted(Z0FBQUFBQmZyVTFPNlpuSl85MkstT1B4cVZkbjFReXN2ZFNlWi1BV0UtQ0VGcGtsem84QnNBTnlQNnV1aWxkS2lSc3ZpMTc0LW55Rm4wVTREWThyNFQyS0lmbHZOUTFxeTgtTnV3NDd2Y2p2SnpPYVJZZmZCUWNpLWhvdUdvT0lSMU05SXFXVUlyNGc=)
                FIREBASE_APP_ID: Encrypted(Z0FBQUFBQmZyVTJLYlRJSnljVGtXVnZsN2FYX1FMejU0SldvOXRMVXlYSFphcUxhcTNIM01SVTJXdmd6d1RPMlZ3YWV3enlua2J2ZEUwQ09rOG95UTlEMHBtMHpKYVJja09WSlRld3ZOQWpORF9MelJwelVDZlhqbnFYYmlpLV9YZ2JMSW1jVk5UTUc=)
                FIREBASE_VAPID_KEY: Encrypted(Z0FBQUFBQmZyVTRyRUZSMjNhTmtFTlJzd2xoTkZ5N0VpeGR2Tlc4dW54TzlDblAxaHdsWkJBcWRkeWNLNy1qRGVKcjRrUFVwNi1CNVQyM1JyNnNrSy1lcG02Q29ITEpOSUktV3hYMWNJbjk2R0dpd1hWNkdiTVNabG9neFhFWHloanBBeHdRcXhBdmFWWFRiQjYxOW5tdnVKOFdBNF85S19JNkpETHNxLVlmUzZwekM4Q0xmeWpOSVhseUdmb0FqbGZsbFFEYmdFVHFD)
                FIREBASE_HOSTING_URL: https://ottertherapiesdev.web.app
            node: 12.19.0
        scripts:
            - npm install
            - npm run build     
            - npx cap sync
            - echo ${GOOGLE_SERVICES} | base64 --decode > $FCI_BUILD_DIR/android/app/google-services.json 
            - |
                # build Android
                cd android
                ./gradlew assembleDebug
        artifacts:
            - android/app/build/outputs/**/*.apk
    # Ionic Capacitor prod workflows
    ionic-capacitor-ios-app-prod:
        name: Ionic Capacitor iOS App Prod
        environment:
            vars:
                XCODE_WORKSPACE: "ios/App/App.xcworkspace" # <- 'App' is the default workspace name for Capacitor projects
                XCODE_SCHEME: "App" # <- 'App' is the default Scheme name for Capacitor projects
                APP_STORE_CONNECT_ISSUER_ID: 0a86aa66-a24d-46fb-84cd-2d8e2dab75cf
                APP_STORE_CONNECT_KEY_IDENTIFIER: S5BTB687R3
                APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZySnJlZGlid0FqVlZXblpMZWNQUE9IdUtTV0FWN1ZzbmZkOHgxOFg1MWV1OXN0bmFHV2tOUGdwMlZtV3NPUWNzelVGSzNyVEJtYzM5eTI5eXJKeEt6VFBHeWF3R1NkanBlRGRrcXd1ejBkSmNIc0J5ajRXY2djalRtTkJWWWpZWG4zenFVcXFhS0N4UXEtUkhFb044SHFEOV9QOGpUdE5teFRmMTAzTUhDQ2RFX2xKU1lNYm9tWXFoeUZnZVBnVGdXelVYME9sRWJzSi1JQ2V6LWNqQ190Q3BTUnhpdWx0YWx4VmcxVXcwYzl3eUdvSzZjTFZESU9saEFKSUx6c21pV09ha2Ytb0UxdEhkZlhPRkkxZ1kwd2dhY0xNUkY1NkhjRjl4cldfcE82YUpEQ2g5SXA5eDNkb3QwSmtzMEQ5RkFwY0NNRHJ2WlhaNk9zMUU1c2VxQnBxb0szSVhlZjdMemYzWU9qS1A5a3lHWHRYWVhhQlduemlMd2dCeWdZVl91SGU5YlRjVWJ0WGRCMmVaSFBxUXdVd1RaRDdfT1RGMVBtbU9ONXdIcll6ZFc0UT0=)
                CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmZyS0w2UTc4eWRFV1NHOG1IX1JiRW91RG42eFZzRFRaVkVIY1ZuZUdIaHkwcG91aFBXd1NJVVdjOFNOUzlmcnh4NVhXNUtjc2tIOENuSXFubDRrTWVESmhBZTA2YS1Za21vZllhajBzaHpPZ193QUtQQW1fQjJST2JyZDFTMlkyYWNVR1VHTkkxRTQzbzlMRjB6Nlg4ZHY1THh4X2JyakVpQnVzQ1lJTnRHM2ktbXFUdTRmTUZKTDlJbnFuR1JXYnlMbjhyRzdpMGx3RUhpRXh0aEFEU05jMHo3cklxLWVweS1PTUJvYjNiSjdER29Jdzd4d01qU0Y4N3lYZzd6dEFVV1k0c05wS2R3dllrVnlkZFk2d0Iwb1duS0kybjhrbmhuNG44SlQzdTluNFZGRjZ4UmpuOE5raUJfVzhSUXdDc1Bwa3EwUE1pYkUyeTBfWWNFRXFZMjkybXRlT2dET1VPbFktSjJlM2pycnhVZERpa283dEJVelk0b3JaNl9XSXFxRENlR3k0V1h4MHM0SllaekJjeTFiTHFIcVNQNEZBYXlyak5xVnBxR1Rham1nemZhX2FHX3JIZ01uUTc5cm5MZE1VcG91a0R2bjF5ckw1aWhCTk5sYVBJM2dhT01kOGUzZHNIX1hNRmZjZHNfbnFaYlRFOGFVTWtTZ1FyUzc4dGtpakJVMWhkUHlDSld3cVV6c0xYSXRzNkUwY2MwNkx3Sy1Qd2xjNnZqTW40UlB0VGZEUF9aVmkxaUdRZ1R0SXhyOV9nYjRINVdEMFZyclUwNkdFaHR6SGNhTDVEQzN0WFZFazNBemFTUXRYdGc1ZUgwOW1nU09Uek05SnJWbmYzejdqSEVoaUc1YlMyajFTUlpUUDBkY21xNElaS1hERUNpNENFNmVrUm5DQXdFaTNYZE56OFRGMnZxZTM5MU50T3FJVmcwdGZMbUFqR3B4OXVtVlJ6TFRZNFpobWxQZkhLVjdUaEg5blVWdXRKUkh2dktLdnBpcTRRbDJVcEx5NUJuek9FT3djUzdLZUdDRkhDb2t5ODhzM1RnbjNrV1NncnlUeDJGWmVSMTZoUTE1NXU2bnhIVDByd1VYTGVveHNiMXQ5dzlINUw3QWRRX2pLZzJ1cFN1cl93c0l3U2pjdmxVaGx1NkFZQnRLU3JDd2pnaVgtZlgyUjJlVTVjdG1jeGkxS2dRdlZUSVFpTnFmOFB0SXR2WVljekgycjNERU1WZTVIRk1mNmYxXzR3cFdHbVNBdWswRm9rY3JCMmgtVE8xb09hVk9YUnQ0bmk4Yld1bGl2d0Y0X2h5V1N3Q0tpdmZrRWZNeWRJY1BXb0x6RmZqWERGYlBRczhxZnhPNHRYZG5nVkk1MjRBZTBNbHN0aTlyRDNsOEVEUHRrNGYzbzljOENiSmxLSVplRTFKWnljRmVSZW5wbXRqb3FjYVI0cVAwRjRPUG90NzRudjRmUzdsNkVyWC1zbE1MRnRqVlZsZkRldGlqcXZNd0Z2WmNXQi1HT2FYS1RKZ0ItMV95eE0xaklYY3NfV21Bc2xST25DU3htd0hiQWkxdlo3TjlJWkh5WS1GZEVLQ05jUEo2LTUzMTByVlBXTHBjSVgwNVNnXzNVeTZmb0FlT0h5Y3dRUUdwbmN2ZHExQUx5TVBYYnp3bHZtc092cXZyR3JkSGtuam5GZGhPTTJRb25XT0Q4NkpCaDJ0RmlMNmtDeEdXY1ROclhrRkxmTDIzakVSNVZLU1UzUE5qU0lGSUNnbnhCa3lXLUYtTmFpbllWN081Y3NKNmlDUDhoTTg2NmVqWnZobDN2RHBQdzlIZnBaLVpqOE1Hb1B3VjJKajMwdzJScURaXzRGdHdyR2g1TXk5NktMZ29oRDlSbXdxakx0c0Y1RHdOaEtKRDJiRUlIU01JRGpMTXQtZTd4VVlZU2V2d09LOXFBY25KOWdsdnluRksyV0lsVmZlUW9SbDFRZG15ZzN6dUFIWFlOQU04NHR3SXFWLTlIRW11amFDdzFRaE0ySG5nTGdzZ01va2c4OEpKcjNkNUw0STlnbUZJN2pLWDFkbHlLdE5EV2FFRm9PUFZJX3NURHp0NDl4WkRsVFdlYWVWa2JoVXdDREUtUVJLOFB1NDZBNS1Xa0ZQQk1NMEhjcEdXVC1Gc3pkY1dfN0R3Q1VYNEdyUjZ6eDUydmdkeWlLUVlDaDFPV2JaOEJxRXd4UjNFMTZPOHhRYjJkaG50YVVhU2xWRHVPU0FhdktSa2diSjNwa2xfVGIySF9JdEpVTE41Z2R6TnY2XzgzNXVXUEdnNEhqNGR3S3dibXJYTFRMekJ5NVh3MERrc1drTWFDOWZVNEJrREpiY3IzWEVWRmFSR3hmaW9feDhnb1Q1SGJmc1VxWi1FUDlncHJGSDZ3VDhzYUVUYWhFSkNzZ2k5dEFoZU5ZMW45V3JvMHZ3S1JNNzBFOVlmbmxWQXktR0tpOFVXOFVId1owaVNPZ0ppVUp0QjVCLU9DdS1WYU5IWmMzenVYNEdLclFBbTlMN3F4eXNiMWRFY3JiR3hQTnp0QzdQUm4xQnN6T05HV29wemZzdG9EbXFKSTFsT0tRMTBBcmJzbEhQekNEbGxERG1XLTRUNGJkQWdRbkdZMEZhNmczbjAzdzIyUkdPdEU0TlJiTjZmRHoyd256ODE5bWlFN1A1am04TDlob2w5bU5obzFjV1Z4OUxNRGVEQ3hRRkdKcVdaRXBXd1M1bHZlajNGWnVWWEljOGhzYWx4SDIyWDRZOFNHMl9ORmNMSmxVT0lwV2RWOXdzS1JZVm9jd3pqWlVxUjN5U1dtRjFhbmtvb19ic1lvaUc1LVVsNUN0ZUExQVpMSjItSHdkV1FiVkU1R2xFcUdEcEx6MGVaVm5GRHNWNTB4RGZnYk9QbGZGZ2E5anhnTXhCdm50TVVGNTFhdEZUYkMxOTROdU5fcHh5SnVST2wtT0tsZ0xnTEVHZ1ZaRFZCeXpYRGxDWVcydExMREMteDlnVklYQk1SOUplQnBvQ2dtTWVrY3N1WlVFTzRUZGF3SkRPalpPVURheFlURlQ5dUlMbC1vaDZteGsyUXRqWGJLMXZFdXFqcHBxMHNQTWdkbkNyS3llWHJhQzRnWl9WSW8zTTROY2ctV2pBdklYSXlvZ3FaVWw4NWVWcjkxd0JWMHVBaGVvVlNiNWJtR182U3hHbzAzM0kxUlkydHNNMjQyZ1B0Y2lyX0Fhb19tZG1NQmtyLXdOMDdaWGRPYUxhZjFSOWttcFhpbUVPaHJnTXU4Q1QzSG1sZjczUUtGMEFYZlAtTmZ2czVqeXNtUmJmYTNOeXRsaUtockk0SDVTT3NFbHdvblQxS0U1UjloOC02LW9rbVpad2ZqVnhFRT0=)
                GOOGLE_SERVICE_INFO: Encrypted(Z0FBQUFBQmZyQVRvQzRkVGFJaEg1UjNtdWRISkxJQXRMUWxLZFByWFZSRnBHZ043c1JsSGhMZWg0Skl6UWNKWlIxLWVxVXpJaXR4MXFQaVgyVkhLXzg5WGJSZWFWY1ZTcnhUUEJEUEJWeFUyVHhFVDM4eXhha0NCbjdxTmFqMEdHdVBldzhURXRJV0pCZ0E3MzlsRGpIREFkTFRHYVN6U3BZZTR1MUZnaDlrY1BkanYtU3MyTUNKX2xIc0VoQ3BZUVdveDZ1Wlh3VmlFbDYtX3QyMlhMRGJ3UHRFTXVWQW56R3dNb0FZOVk2eTU1OENCZF9zQUp4eDc3OTd6WEpwSngyVFBCQ0RFbC1EcDlWdEVKazNFa1ZFRlN4Zk9lZ05PdGtLNW1PYkVJeG1IVHhzeTRWLUNfRkswM093ZWhIVnB5Yl9rNm1JU2hNVWRrX3JJZ1NmNFJqbkNJdEJGbENVNzhuR3ZJZjdNV0s0YnBLLXE3NWlTM1NSSTB3S0Z5NnlIbzFHQlFoYzMzRVlJM3pNdVl1am5aM0pjTWx2TEFFRVZNcDVrQ0tacFRvdWNmYk5QakdiVXBiUkt3Q25OaWhBM2dLVDcxa3BKbGh3VTJsanBsY0ZhTTNYZWRFak15bmlYLUFmb1RTdUtfbFNCWHVIb1BuNFQ3WUR0REVmZEpOYjZqazVoX0lDWFRQeENZQmRCVDVCZUhFNU55ckxUc1hXeXRyQ29DZ3NWV29OVmJoRU1DXzJDSjJNYWhNUXZ5NGh0NmpUSW9LTUlDZEJtNkFveHNNaFdaOVh1ZkRLbGRUa1JueXIteUo5STZrcGkyZHNReUhvb2xrVVJwWG1pTzZDZWc2MjFROTNEcU5LMEhYbHJJTUxKNHFSUDc0YjhIaGlQd24zekJxbXFPU2RiZU43WXhrb3JzdFRXcENheVRTVW5uTUVLaDI4aHViN19WbjRxTzBqWHZZMjRSZXpJbWxFMGc4RUNzbjkzZDZUZktGR0JweTVUQnVIVkZPYm94Y0lCc0xSNHM3VUo5VWNIcXlQbEtXNUpyRVN1bUcyV01CLUlFaE5Cb3hKT00wR0ZEaHROLWMtUnZfZnhJSTZhaGp4SnlCc1Rsb3dYeFhsT0lDMlBzMXI4dDVZb1dHMFk3eXh1MTItRDJEanhCdEpSVjFYd04wb09YRjZPcjUxX1FhQ0xaaGxYM3BGUl9NRE1aeUlRNHNpM0IxN3F5STZGUm9mVDV5YURmMjdISWZBRFlnOWx5ODM3MWxBYW9lbzAtMmRiR0N5VzctX3hjOEVrSFhtbExqMWtza20ybkpHaG5HaFcwV08zWFNzOWdaUTN0R19IamJjTVVrNTFxaTY3TElKZXNGV2txV0hiQm9RTW5IWVVYcDRxY2JhVlF0Yk51TWR5aWRYSmRBZ2NRMkV2QmFRcmwtSnBvS01FMEt5RjlCbU5qZEF3NmdXdmpzdTdUa3U3S1RBblBBSE5iMUdxX2d4NTM5VFItaHVVaExNWk1xTVBGd2QwelU2cXoyVFV1UGF3X0tOaTlwdGhzSjJ0UjBocGt5c2lnSzNadTZXZ0hNdVFXTWRmb2F6X285aHVKajFGZkpZX3dNOVdXLWlrRzdaZmtBRnRjeGFSdUZWNGxxNVdac3kxMWJtZlpuZmRmYi0wZXVZVFVRUUR0MDNELWJVa2xMdWRtOEQ0eTNxc19FenIxS1gtOHZ4SHFyd1BOUEduU1JvaXVKZklBUkFGb2FXdk9aNHhHTGlmLTAxNUNoQk5aSWRmUDRxckZ3X0QxM1hnYWhrcC1XYkZDM3B5WTJiUXE0VWxKZDBSZXVZUEw0bndYWmtfVDJEMGJ2ejVfcTZBZlpQSldicGlreWJHUGRYSi1SMGtGd3BhSWtTSFFUVVY0QUFCNnRQZUZJSE8yZF9zUFBPS0V1VkViQlNiQUlMVzEzOWhkQmQ0bmdFcjhSVXZIU2d0amxwQUZDdEZuX1dGak1ZZThpaWZ4Y2pWYWR4akFkWmdWVk1CdUxjbUxtWFhIdjFaS3JGeHhSdEVBaF9zakRIamtxODQ0THlNbmtSNkl0bVpoMU51ZGZGdmFYanljc09aVzhiSEtVMHNObUU4NFJnQ0JUb0FXbDkxU3hwR3ZWSjdHMk02ckhINzBseVU5OTB0c3VzZ195T0RMdlR2c0xnd2Z2dlNXeVlwdFVNbWFOSzdyUWd0WFpYZGJZOTRTUDhBbmtOU25KcXlWbkg3MW41X3dxdVdrV3FlLVRtcFF0RHdqUUU3SG54MFBzYjZiMGFYdGRSSmNFdnRsdUFwcTRKWFdiaXY1UE9jTUk3NG1rUDFNVXlPMUFac3FlcXpETmFTb2s4M3h5SGtsYVNfVDJhZXFiXzYtUEpWT0Z5WXpBVVRBelZYZmpUVnZENWg2X2tiLWNOaGNTMzlzTjB3QmZxUV9wblhzZFVIZTdSWHRlY21mV3NLNXBERURaaGdfY3BZXzFqbExjZ202U0pNZ0Q4cGZMZVlTaWJRX0RoTm9UamUtWGVUdWtpd3Q1NHhoZHRZR3ZadGFiTFp1MEJqbXFlR3hHdm01MzllR3NNU3ZHd3lnWElhYXBuMEY3eUFua0ZGd0tma2dXMldaWm1Xam50V1lqN1Z1bEt5U0tnTGdzLWM1bTF5elVWUVZrcWhhNGQ3ZWZZa29HUHpUeHoyU3hjaTA1dFpPdkVwcE5XQjVwZXE4TGpDZ3JWRkhHdnNLd3R0T3VqcGQ5S0hHSjNfMDB2M3RDdlNYTXkxNXVKdl96V2NpUFVnY19FY1h4cE1GRmdxY0RoOURBT1djUlhZRjJMUWNRZDZteXJoN1A4Nldyc2xROFloX1VBcVdPOGhvbjUxeXhIZXROcVV6Ylg0b0ttSzAxTHFoWGh0ZElkVjR1OGpscjdpSzlrY0NKMzhrd3V4c3hyVUw5WEtqWGM0ejhtTVRtaXl4UFQ4UDBOMkVub1ZvOUVqZ185ZnRVZGZFSm9Dbk1ZNVJPOU9xOUNZeVVSLWdia2cyeEUwcUxOY1BDc0lGMGxuUVhmUVFQMDBBcE9XT041a2JPTkdpY0hYel9rOVM5M0pNbzZOaXVJUTFoQ0t4TE9EZ0ROMWxoaFZtWXp1M0ZZLTBXeFgyZGdmdFpnSnVKY3F1ZVRQLUlySGh0WGhaUTA4M1RIa0MybTdWcjBPQzBfV3VjYVkydlY0bUNrTTkzdGYyMmpvcW5Mb2hfTmVlejg9)
            node: 12.19.0
            xcode: latest
            cocoapods: default
        triggering:
            events:
                - push
            branch_patterns:
                - pattern: master
                  include: true
                  source: true
        scripts:
        - | 
            npm install
            npm run build
        - |    
            npx cap sync
            echo ${GOOGLE_SERVICE_INFO} | base64 --decode > $FCI_BUILD_DIR/ios/App/App/GoogleService-Info.plist
        - |
            cd $FCI_BUILD_DIR/ios/App
            pod install
        - |
            keychain initialize
        - |
            app-store-connect fetch-signing-files "com.ottertherapies.app" --type IOS_APP_STORE --create
        - |
            keychain add-certificates
        - |
            #!/bin/sh
            set -e
            set -x
            cd $FCI_BUILD_DIR/ios/App
            agvtool new-version -all $(($BUILD_NUMBER +1))  
        - |
            xcode-project use-profiles
            xcode-project build-ipa --workspace "$XCODE_WORKSPACE" --scheme "$XCODE_SCHEME"
        artifacts:
            - build/ios/ipa/*.ipa
            - /tmp/xcodebuild_logs/*.log
            - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.app
            - $HOME/Library/Developer/Xcode/DerivedData/**/Build/**/*.dSYM
        publishing:
            app_store_connect:
                apple_id: shane.earley10@gmail.com # <- put your Apple Id here
                password: Encrypted(Z0FBQUFBQmZyQjlpcnpnSFd5cjA5ZkIwSkNTN2ZCNXRXcnowOUJPc05kajBabUF0aU1BLUVMbE1tSjlhclhpcU9QVUlSaXdOZjg0Y2dlMTNaUHFuOGZfWVA3Q1dITzNsaXhxa2NtVDBVZG02ZGtYWHN2MzFNUkU9)
            email:
                recipients:
                    - shane.earley10@gmail.com
                notify:
                    success: true     # To not receive a notification when a build succeeds
                    failure: true     # To not receive a notification when a build fails    
    ionic-capacitor-android-app-prod:
        name: Ionic Capacitor Android App Prod
        environment:
            vars:
                GOOGLE_SERVICES: Encrypted(Z0FBQUFBQmZyQVJIdHN3bDZPT3hwQlZNQUVWWGVQNkNMUTRtbUNhUGJQSG5ZYjg0Y3JuMEdIaGJLQUN0LV9yeWlnWGZaMnUwY0ZLcmM0cDZsbDc0aFJTSmJoelJfOHBYVlhIODJQTFJBdVNWRzNXd3lZUzVNYkp1bC1aWldoNlg2ckZ0NHYwbVFPemE5VGZnMUk2eWdQUUpEeVFVcXRzbEwteU8xdHEyYjg5ZzhKZDB5cms3VVUwMVk1ZjlnQlFhUXctUElrWHlNZnJZVGhQaG02ajF6Q3VacmxvV0t5Sm1vd05nRFRsa18yZUJ4QkppMVRLM19GVm5BUThCRzQ4bnlEeFpQSEJVU2RVZDk2RUdIRl9aZXNXOTg4TUtyVzNGZFpraldZRUJZME5rd29KN243MzlaelBQbk4tcTN2RVMwUTJvaEx0aF95VW8zOVNTVFNBRm1taThSUjNDSFk5RkZ5N29PUTlPX0QxWXNFX2tfVFh5a0p6d0hFYkZGWk94X19rTGw2Y3dsaFhhMmEybFc3OGRTZ3JOUWt0bzludkJnRHItNFhaT3pNdlJZN1Via3R4UlI5SjNvck1uZmJWcXdtdU11M2swNGt5WEphSTBJQWlqQnRjTTRldGQyQ0tvdnBwdWJYOGpvQXllV2pFdE1vRTNPM2V1OXJvbC1IZkpmeFpKdWt0RDdLSTVmUGxwd1ZsUnVMaUpvS3VGUjY0Q0FROTdlXy1mbXZOY05MX3VQUzMzT1RqWl9TMzJ3a3M5ZGc2YnVlRlNPOU5pNnVzR0p1OFo5QjhuaXE0MnZveWFITEQwek5qUWhlWHY5MFBEME1qb0NDQkJpZTVsTkc5bS1kRmNkWDdiN0QzMU56S3RIWkowUXFMMFZuS2xlOU5KWERDRVp1ZXBPUUxLbV9jbnNXWGdGbTRBeVhiX0lsbWx1VU1GdzFsRVVpVWF6c1dVMTlMMEdQaHhnRlNuOWlFb0p0OWJ1Z2E3dTJtMXVGRzZucmdDU1RNSzRPdWR1NXpjbGJHaEtvVktwcjJiU3dsNzR1N3J6aTg2a014UFFyR1h1aE5DbHl0YjNnMFgyZEpWdGdqWWxuZWk1SXpFNE1mdWhDN3N0MGg5RklRQlRFam02SnlOTXlmWFkzVG5rYnFPaTFLSkNiYmJObXdRN3N2VGhtaHhCVm14LTQ1MHA4UmhVd2k1YnphRURFNmcwRDhydmJ3RXM2a2xqTmxBUEZiLWFleVNxUWJ4bTJOVDZzTjVwZWhnd3dsQ0JZV3hJeGg4S0FpamdZRXZOVmRuSzFVbWwxallidFJ0aUtVc2hfOGFidTdBb04tam1WNG9wMC1kUkxrMnA3S29NcWJRcGJIbFUxOEFBUE1QLWxORXFfU3Zib1JMVjZXUjFyRTdleDZneGFkM082VUI2eHlqWm9BSWx4cV9aNDVydDd4cFRtWHhlN29PM19UdUZsRlN0S05ILUtxOTdWOTBUR3N6UDZ2M1RxcUw0ejVWMzM2NnhvODdHazZ3ZkZmV25hOEhGUWNjQkZ0VWFlWXZ1QXVRR0xXMlRYWVdocWYwSXNwQUF1clhpem8wM2ZkUldqZklDQXJmN2lOS1M2YzJWdnBBUTdTMFZZME9IMWdENl9hb1NvZGdFWmtwM3pHeVVCakxoVmZ5TmJQT0NlMFJqRTNYMHJXWUo0ZEkwbm4wdkNrZWozSi1yb0w0RUxXRkVXMk96aUNwazEzYlZ5eHZOQ2o4cWdoQ3pZLURZRFQ2MmNQTDNGZjZLZ1NhRjR6NW1CV3FUVnV1Nmd3a01DdlFXX3FuN0xHX2VWU3hydHAyZEsyOXo1ZXBfd0N5SklEN1ZLNHl6NTBKeUhrLS1EOWNUWFdxRk9raVc2djlBbzJabk1CT3I2Y2dqMURjeEdXNWVTaWs0eFZhTmlkdXlxWjNvLTg0WjJwY2RPUVBxdkx4YXczNE5kZVdaZmZKeHJXTFpIeHc2ZEFkWVdkTEpfa290TGJWcTlsMUF0YjV2c2xGblU2dE10Y2hrUFZvRVRNMFBfejBTNTg0Y2pyTXJxUDBCM2ZVdXBVZ21vX2phZDhJQmF4d2UwMy12M3puRnZvUEplX1oyZGlVTDhRQ0hYWjZmSTgtUWFxSkZpYTVDdWpmQ1pJYkRUTzVGdm55dktZZjQ2TnB0Ulo5QWU4dE5PZnlEbjlLM01XdllPRW80ZkZvRUYtTDZjLTE3TVhhbUJzOENYRmg0Ri1hWVlIY2J5OEttZGZqLVFFeG9lUXYycEJoWlRfem9JbWRtTTlwdzl3YnN0cndnQnRJV1h3emZva09QbTlYU3JVVllyNTlWOUFHblh0ZU9kR2d4cGRBTDNWcnZob2FIbzRfaVdvb2pod0hKS0k4akhkMXZCVS0yblBjd3dsVXhhVFVMOWR1N3NlZzNldU80WXd4ZGlkd3BHNUZDZ1ZzSEZFUGNtZlNkZTVZbFVEVWlfYTZaRTVJemtTOERjQ3ZVNE5URElMNXZHM1U3dlhiRU01RkdWRURZMXFrQkZ2aExnUlRzaXFwTTdqSjJ3QU5mLTZOaG5VSHRFblp5WnA5d1ZlVmJKOEZLS1RNREk5Rm1Gb0ZQSENoeFdXT2s5ZG1vS0U1Q2xKc3VMUFZtWjU1cFY2bDJZRC1NUVdKaWw0VDFPaWloSTAzTU5fNExlMzcyREJZcWxiTHRNamQxS1V0b1otdHRqOVE1ZFZnc1l6eUxSNHo2WTJtRVlHZWZ1S2dwSC1vOFYwbGp0TUptblpaTUFMeWlLdlJ1X3lUUkNCU3dWMHFMNGhVT0ltU0FnWEFvekp6ZVF4d0cwaDEwZlFGRDRBV0NJS3lnOXFKYVBXMm5oNl9EdVVRMmhPU3k0Vk1uZnhsVWQ5TFZ6MjVyY0RuUXpsb21uMlhQUFNqcmN0T0NfQ2c4a3NiMjhGSTBPM2tQTzQtb2N5VmQ5SzRVUzVtVjVWdTVRMmM2a2JldThiSXptenJDSWtta01EbUtZSzFxTEhyazZmNTUwZlRiZW1KeHI4TDZiRlpNY2ZrT0tFUXpzcG9MM0o3NnZrMjJTSXQ1VTM1VXFZRDQwMHFSSlhBNUxneWhabTMwSmd5b05Ba2lwRnVNQmV3UzdhWDZLZDlhN3hBT0Q4bFRiMkVuZW1CYnN4dWstODJKM0FaLVpUbW80Q05UR0s3MHU4cnJZNzJRSVh2anZ1blpicV9FcmlINzcydUNXaldhUjluV3Vjbncwemh3OXVkclFfZ09qa1BrOEdSVzhKSGR0bFdXVGtnV1I2dnBCQzA2eVk0cTNFTkMzNC1FMnhaVjI2MzhvR2I1dThBcG4ydDJJNWVhMlNKaTNXcWNvc3NyYi1WbmRNYTh3SUswZEpqOEp2bUZUaEdDOVFpaEdXc0RCaDZhdnpyUWNkZFpCb1lZb2R1amxBY2paQzd0U0E1anRUMEo1SFRUa2ZDd1hVOHhCd0xyRXFNWFVIMzk0bFpnbDh3dS1pS2VLeDk3X0o5NThISU43ZmVxVlZVbUZXY3pBd3lWbGxjelpJTTd3YjAzaTduTFJ1SkV1VmlrTXB0VUthSzhzeTlJSHBDcjh0YjEyNW9PSnptYUdnWW5nRmJHOWlhbUxEdDE0am1xakx4dFFCekg5N0dld1hjaU5feFdhNVRhdmo0YnotbG1SbVp3VW4yOWxaM2RHT083d0lGekJGeXptVHBjalhTRUIwWE5KU3YzZHdyQVRfeFBDdnFaRnhGN2wzRWk0T2ZSN2N2RGlpYUUtSkc2MHZMQjd1VUhIbHM0RDhPYUozVjlZcmxhRVRDVXZRTGcwcUhkX3piYlNHdEdoNEZMNjZsdV9fcEN4UUNsWVY0U0t5cG9tTExEUTBOUEpBWnVmaUFVSzZBc1ZhSHZ4ZzZUWHZhcGVGcW1BV01jUXdYb2RRM3NER1FtNTNSZVAwVFEtSGpzVXQyR1VkSEFmMGpvTkFNNlA0N05OVUxySjJNVWQ5bnNWT3MzZzNGb1BZLU1qTV8xbUd1V0VBYVQySEg2c3B2OHA1VEV0ZkdqcGxQbmcyNWUxQy15Ny1CQ241Mm5KMGIzVHJ3amVRZmlPZlBRcmpJNkRXZUdlMVNmYWlSbV9XY0pseVRaODBXdE1XNmlTbXo0ZlVDRTN1ODlzdG5LRzRFRnM0RmMtWW81NU5RN2lnb3QxeklRU0ZkN0FkTV9mRjVMTmNHRTRMU2dXbi1lNFIyVWNHdGEzdVNELS1JaGZ6YlU1NXR3T3l6bmZCeEM2YmpRV18yNVRaajNOVXQ5QUY1a0VxbmFUeTN5eG0xYURNVWZ5UWJidkVydFh4bkJpcVBxOUFOS1JnYi1iVkhhSFFCdUtqMEROU1ZqYXBqOGh1WWk5V2NsbWRaWVpPQmhGVGNMR3Q4S3Q4T2NfRG5ULUtMR3FRMTNsd3RkMHh5cGphcjgtRXBxMW5jSjNnRjl5X3FPdGM2bWQxZUlKUDFQSWo4Mlp4ODh4MnEtNzZfZW55Z0hrOGU0b3BnMURKNllaUzdaU1lmSTB0dW15YmVnbVdaRnRuT2poazZZbkVtR3dkMEJKRDRILS01VVl1QWxUal9YaUIyaDV6YzVsc2k1MXRRemJUNEc5YUc1QnlxeXhGcFZYSzFZcjNsNF9Xb1A1QjA2SGRyMXp0Z256ZjRObUZFNWZqbEtsMHdzaVZjMlhObjBMRHljd1BFbFJIYnFmSlJrbFl6bDVCMUNYTWJGUEFmUjNIUUJGOHFMWXd2cWFXOWhKMFhlVFk9)
            node: 12.19.0
        scripts:
            - npm install
            - npm run build     
            - npx cap sync
            - echo ${GOOGLE_SERVICES} | base64 --decode > $FCI_BUILD_DIR/android/app/google-services.json 
            - |
                # build Android
                cd android
                ./gradlew assembleDebug
        artifacts:
            - android/app/build/outputs/**/*.apk